{"ast":null,"code":"var _jsxFileName = \"/home/antoniopedropi/ses-group4/frontend/src/components/TopicList.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from 'react';\nimport axios from 'axios';\nimport { AuthContext } from '../AuthContext';\nimport { Link } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TopicList = ({\n  courseId\n}) => {\n  _s();\n  const [topics, setTopics] = useState([]);\n  const {\n    user\n  } = useContext(AuthContext);\n  const isUserTeacherOrAdmin = () => {\n    return user.role === 'admin' || user.role === 'teacher';\n  };\n  useEffect(() => {\n    axios.get(`http://localhost:8000/courses/${courseId}/topics`, {\n      withCredentials: true\n    }).then(response => {\n      setTopics(response.data);\n    }).catch(error => {\n      console.error('There was an error fetching the topics!', error);\n      toast.error('There was an error fetching the topics.');\n    });\n  }, [courseId]);\n  const handleDelete = topicId => {\n    if (!isUserTeacherOrAdmin()) {\n      toast.error('You are not authorized to delete this topic.');\n      return;\n    }\n    axios.delete(`http://localhost:8000/topics/${topicId}`, {\n      withCredentials: true\n    }).then(() => {\n      setTopics(topics.filter(topic => topic.id !== topicId));\n      toast.success('Topic deleted successfully.');\n    }).catch(error => {\n      console.error('There was an error deleting the topic!', error);\n      toast.error('There was an error deleting the topic.');\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"list-group\",\n      children: topics.map(topic => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"list-group-item d-flex justify-content-between align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: `/topics/${topic.id}`,\n          children: topic.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this), user && isUserTeacherOrAdmin() && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-danger btn-sm float-right\",\n          onClick: () => handleDelete(topic.id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 15\n        }, this)]\n      }, topic.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(TopicList, \"NB83o12CS6ripefb6nJyBqCqBgk=\");\n_c = TopicList;\nexport default TopicList;\nvar _c;\n$RefreshReg$(_c, \"TopicList\");","map":{"version":3,"names":["React","useEffect","useState","useContext","axios","AuthContext","Link","toast","jsxDEV","_jsxDEV","TopicList","courseId","_s","topics","setTopics","user","isUserTeacherOrAdmin","role","get","withCredentials","then","response","data","catch","error","console","handleDelete","topicId","delete","filter","topic","id","success","children","className","map","to","title","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["/home/antoniopedropi/ses-group4/frontend/src/components/TopicList.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport axios from 'axios';\nimport { AuthContext } from '../AuthContext';\nimport { Link } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nconst TopicList = ({ courseId }) => {\n  const [topics, setTopics] = useState([]);\n  const { user } = useContext(AuthContext);\n\n  const isUserTeacherOrAdmin = () => {\n    return user.role === 'admin' || user.role === 'teacher';\n  };\n\n  useEffect(() => {\n    axios.get(`http://localhost:8000/courses/${courseId}/topics`, {\n      withCredentials: true,\n    })\n    .then(response => {\n      setTopics(response.data);\n    })\n    .catch(error => {\n      console.error('There was an error fetching the topics!', error);\n      toast.error('There was an error fetching the topics.');\n    });\n  }, [courseId]);\n\n  const handleDelete = (topicId) => {\n    if (!isUserTeacherOrAdmin()) {\n      toast.error('You are not authorized to delete this topic.');\n      return;\n    }\n\n    axios.delete(`http://localhost:8000/topics/${topicId}`, {\n      withCredentials: true,\n    })\n    .then(() => {\n      setTopics(topics.filter(topic => topic.id !== topicId));\n      toast.success('Topic deleted successfully.');\n    })\n    .catch(error => {\n      console.error('There was an error deleting the topic!', error);\n      toast.error('There was an error deleting the topic.');\n    });\n  };\n\n  return (\n    <div>\n      <ul className=\"list-group\">\n        {topics.map(topic => (\n          <li key={topic.id} className=\"list-group-item d-flex justify-content-between align-items-center\">\n            <Link to={`/topics/${topic.id}`}>{topic.title}</Link>\n            {user && isUserTeacherOrAdmin() && (\n              <button className=\"btn btn-danger btn-sm float-right\" onClick={() => handleDelete(topic.id)}>Delete</button>\n            )}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default TopicList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}